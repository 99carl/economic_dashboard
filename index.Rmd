---
title: "Economic Dashboard"
Date: "`r Sys.Date()`"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: scroll
---

```{r setup, include=FALSE}

# Carl Sacklen, 2021

# Required Packages
library("jsonlite")
library("httr")
library("fredr")
library(dplyr)
library(tidyverse)
library(ggplot2)
library(lubridate)
library(Quandl)
library(flexdashboard)
library(plotly)
library(newsanchor)
library(dygraphs)
library(data.table)
library(xts)
library(tibbletime)

# FRED API KEY: aa3541bedc886f0b06fa85a62e7177e9
fredr_set_key("aa3541bedc886f0b06fa85a62e7177e9")

# QUANDL API KEY: Czu7sXoss_MqATwRtZXh
Quandl.api_key('Czu7sXoss_MqATwRtZXh')

# NEWS API KEY: f6d67ba3fa0847f5bbecac0fcfa4a840
#set_api_key("f6d67ba3fa0847f5bbecac0fcfa4a840")

# Getting dates
today <- today()
```


# Overview

## Column 1 {data-width=400}

### Summary

```{r}
# Summary Data Sourcing
## US 10yr Yield
usa_10yr_yields <- fredr(
  series_id = "DGS10",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

# SP500 Close
sp500_close <- fredr(
  series_id = "SP500",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

# Unemployment
us_ut <- fredr(
  series_id = "UNRATE",
  observation_start = as.Date("2005-01-01"),
  observation_end = as.Date(today)
)
us_ut <- rename(us_ut, ut_total = value)

# Exchange Rates
### USD EURO
usd_euro <- Quandl("ECB/EURUSD", start_date="2018-01-01", api_key="Czu7sXoss_MqATwRtZXh") %>%
  mutate(Value = 1 / Value) %>%
  mutate_if(is.numeric, ~round(., 3))


### USD GBP
usd_gbp <- Quandl("BOE/XUDLGBD", start_date="2018-01-01", api_key="Czu7sXoss_MqATwRtZXh") %>%
  mutate_if(is.numeric, ~round(., 3))
  

### USD YUAN
usd_yuan <- Quandl("BOE/XUDLBK73", start_date="2018-01-01", api_key="Czu7sXoss_MqATwRtZXh") %>%
  mutate_if(is.numeric, ~round(., 3))

```

***NOTE: This is a static preview of the dynamic dashboard for illustrative purposes, and so the figures are from when the script was last run and the results subsequently uploaded.***  

This report is for those looking for an overview of major economic indicators and their trends in one place. Here are some key figures:  

* US Treasury 10yr yielded **`r format(tail(usa_10yr_yields$value, n=1))`%** as of `r format(tail(usa_10yr_yields$date, n=1))`  

* S&P 500 closed at **`r format(tail(sp500_close$value, n=1))` pts** as of `r format(tail(sp500_close$date, n=1))`   

* US unemployment rate was **`r format(tail(us_ut$ut_total, n=1))`%** as of `r format(tail(us_ut$date, n=1))`  

* **`r format(head(usd_gbp$Value, n=1))` GBP** = **1 USD** as of `r format(head(usd_gbp$Date, n=1))`    

* **`r format(head(usd_euro$Value, n=1))` EUR** = **1 USD** =  as of `r format(head(usd_euro$Date, n=1))`   

* **1 USD** = **`r format(head(usd_yuan$Value, n=1))` CNY** as of `r format(head(usd_yuan$Date, n=1))`   

Click the tabs above for more detailed views. 

### Latest Headlines
```{r}
newsheadlines <- get_everything(query ="", domains = "reuters.com", page_size = 10, api_key = "f6d67ba3fa0847f5bbecac0fcfa4a840")

newsheadlines <- newsheadlines$results_df

newsheadlines %>%
  select(.,title) %>%
  rename("Source: Reuters News"=title) %>%
  knitr::kable()

```


## Column 2 {data-width=600}

### US Treasury Yield Curve *(Source: FRED, Carl Sacklen)*
```{r}
# Data sourcing

usa_yield_curve <- fredr(
  series_id = "T10Y2Y",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

# Making plot
# USA Yield Curve
usa_yield_curve <- as.xts(as.data.table(usa_yield_curve))

usa_yield_curve_plot <- dygraph(usa_yield_curve$value) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Percent") %>%
  dyRangeSelector(dateWindow=c(today - 365, today)) %>%
  dySeries("value", label = "Spread") %>%
  dyLegend(show = "always", hideOnMouseOut = FALSE)

usa_yield_curve_plot
```

### S&P 500 *(Source: FRED, Carl Sacklen)*
```{r}
sp500_close <- as.xts(as.data.table(sp500_close))

sp500_close_plot <- dygraph(sp500_close$value) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Pts") %>%
  dyRangeSelector(dateWindow=c(today - 365, today)) %>%
  dySeries("value", label = "Close") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

sp500_close_plot
```


# Bond Yields {data-navmenu="Indicators"}

## Column 1 { .tabset}

### US Year Treasury Yield Curve

```{r}
# Using same plot as summary page
usa_yield_curve_plot
```

### UK Gilt Yield Curve

### Eurozone Bond Yield Curve


## Column 2 { .tabset}

### US Treasury Yields

```{r}
# USA 1mo Yields
usa_1mo_yields <- fredr(
  series_id = "DGS1MO",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
  )

usa_1mo_yields <- rename(usa_1mo_yields, one_mo = value)

# USA 6mo Yields
usa_6mo_yields <- fredr(
  series_id = "DGS6MO",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_6mo_yields <- rename(usa_6mo_yields, six_mo = value)

# USA 1yr Yields
usa_1yr_yields <- fredr(
  series_id = "DGS1",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_1yr_yields <- rename(usa_1yr_yields, one_yr = value)

# USA 2yr Yields
usa_2yr_yields <- fredr(
  series_id = "DGS2",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_2yr_yields <- rename(usa_2yr_yields, two_yr = value)

# USA 5yr Yields
usa_5yr_yields <- fredr(
  series_id = "DGS5",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_5yr_yields <- rename(usa_5yr_yields, five_yr = value)

# USA 7yr Yields
usa_7yr_yields <- fredr(
  series_id = "DGS7",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_7yr_yields <- rename(usa_7yr_yields, seven_yr = value)

# USA 10yr Yields
usa_10yr_yields <- fredr(
  series_id = "DGS10",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_10yr_yields <- rename(usa_10yr_yields, ten_yr = value)

# USA 20yr Yields
usa_20yr_yields <- fredr(
  series_id = "DGS20",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_20yr_yields <- rename(usa_20yr_yields, twenty_yr = value)

# USA 30yr Yields
usa_30yr_yields <- fredr(
  series_id = "DGS30",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

usa_30yr_yields <- rename(usa_30yr_yields, thirty_yr = value)


# Combining the datasets

usa_bond_yields <- merge(usa_1mo_yields, usa_6mo_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_1yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_2yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_5yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_7yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_10yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_20yr_yields, by = "date")
usa_bond_yields <- merge(usa_bond_yields, usa_30yr_yields, by = "date")


# Plotting the yields
usa_bond_yields <- as.xts(as.data.table(usa_bond_yields))

usa_bond_yields_plot <- dygraph(usa_bond_yields) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Percent") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE, width = 600) %>%
  dyHighlight(highlightSeriesBackgroundAlpha = 0.2,
              hideOnMouseOut = TRUE, highlightSeriesOpts = list(strokeWidth = 1.5))

usa_bond_yields_plot

```


### UK Gilt Yields


### Eurozone Bond Yields


# Commodities {data-navmenu="Indicators"}

## Column 1 { .tabset}

### Gold

```{r}

gold <- Quandl("LBMA/GOLD", start_date = "2017-01-01", api_key="Czu7sXoss_MqATwRtZXh")

gold <- as.xts(as.data.table(gold))

gold_plot <- dygraph(gold$`USD (PM)`) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 150, today)) %>%
  dySeries("USD (PM)", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

gold_plot

```

### Copper

```{r}
copper <- fredr(
  series_id = "PCOPPUSDM",
  observation_start = as.Date("1990-01-01"),
  observation_end = as.Date(today)
)

copper <- as.xts(as.data.table(copper))

copper_plot <- dygraph(copper) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

copper_plot
```

### Nickel

```{r}

nickel <- fredr(
  series_id = "PNICKUSDM",
  observation_start = as.Date("1990-01-01"),
  observation_end = as.Date(today)
)

nickel <- as.xts(as.data.table(nickel))

nickel_plot <- dygraph(nickel) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

nickel_plot

```


### Coal (Aus)

```{r}
coal <- fredr(
  series_id = "PCOALAUUSDM",
  observation_start = as.Date("1990-01-01"),
  observation_end = as.Date(today)
)

coal <- as.xts(as.data.table(coal))

coal_plot <- dygraph(coal) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

coal_plot
```

### Brent Crude

```{r}

oil <- fredr(
  series_id = "POILBREUSDM",
  observation_start = as.Date("1990-01-01"),
  observation_end = as.Date(today)
)

oil <- as.xts(as.data.table(oil))

oil_plot <- dygraph(oil) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

oil_plot

```


### Natural Gas (EU)

```{r}
natural_gas <- fredr(
  series_id = "PNGASEUUSDM",
  observation_start = as.Date("2010-01-01"),
  observation_end = as.Date(today)
)

natural_gas <- as.xts(as.data.table(natural_gas))

natural_gas_plot <- dygraph(natural_gas) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

natural_gas_plot
```

## Column 2 { .tabset}

### Coffee 
```{r}
coffee <- fredr(
  series_id = "PCOFFOTMUSDM",
  observation_start = as.Date("2010-01-01"),
  observation_end = as.Date(today)
)

coffee <- as.xts(as.data.table(coffee))

coffee_plot <- dygraph(coffee) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

coffee_plot
```

### Tea
```{r}
tea <- fredr(
  series_id = "PTEAUSDM",
  observation_start = as.Date("2010-01-01"),
  observation_end = as.Date(today)
)

tea <- as.xts(as.data.table(tea))

tea_plot <- dygraph(tea) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

tea_plot
```

### Soybeans
```{r}
soybeans <- fredr(
  series_id = "PSOYBUSDQ",
  observation_start = as.Date("2010-01-01"),
  observation_end = as.Date(today)
)

soybeans <- as.xts(as.data.table(soybeans))

soybeans_plot <- dygraph(soybeans) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

soybeans_plot
```

### Cocoa
```{r}
cocoa <- fredr(
  series_id = "PCOCOUSDM",
  observation_start = as.Date("2010-01-01"),
  observation_end = as.Date(today)
)

cocoa <- as.xts(as.data.table(cocoa))

cocoa_plot <- dygraph(cocoa) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "USD") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

cocoa_plot
```

### Lumber
```{r}
lumber <- fredr(
  series_id = "WPU081",
  observation_start = as.Date("2015-01-01"),
  observation_end = as.Date(today)
)

lumber <- as.xts(as.data.table(lumber))

lumber_plot <- dygraph(lumber) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "USD") %>%
  dyRangeSelector(dateWindow=c(today - 1000, today)) %>%
  dySeries("value", label = "Index: 100 = 1982") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

lumber_plot
```

# Exchange Rates {data-navmenu="Indicators"}

## Column 1 {data-width=500}

### USD GBP
```{r}
usd_gbp <- as.xts(as.data.table(usd_gbp))

usd_gbp_plot <- dygraph(usd_gbp) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "One GBP in USD") %>%
  dyRangeSelector(dateWindow=c(today - 80, today)) %>%
  dySeries("Value", label = "Value") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

usd_gbp_plot
```

### USD CNY
```{r}
usd_cny <- as.xts(as.data.table(usd_gbp))

usd_gbp_plot <- dygraph(usd_gbp) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "One USD in CNY") %>%
  dyRangeSelector(dateWindow=c(today - 80, today)) %>%
  dySeries("Value", label = "Value") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

usd_gbp_plot
```

## Column 2 {data-width=500}

### USD EURO
```{r}
usd_euro <- as.xts(as.data.table(usd_euro))

usd_euro_plot <- dygraph(usd_euro) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "One EUR in USD") %>%
  dyRangeSelector(dateWindow=c(today - 80, today)) %>%
  dySeries("Value", label = "Value") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

usd_euro_plot
```

### USD JPY
```{r}
usd_jpy <- Quandl("BOE/XUDLJYD", start_date="2018-01-01", api_key="Czu7sXoss_MqATwRtZXh") %>%
  mutate_if(is.numeric, ~round(., 3))

usd_jpy <- as.xts(as.data.table(usd_jpy))

usd_jpy_plot <- dygraph(usd_jpy) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "One USD in JPY") %>%
  dyRangeSelector(dateWindow=c(today - 80, today)) %>%
  dySeries("Value", label = "Value") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

usd_jpy_plot
```

# Stock Markets {data-navmenu="Indicators"}

## {.sidebar}
Charts show the value of each index at market close

***S&P 500***  

* Market-capitalization-weighted index of the 500 largest US publicly-traded companies. Widely regarded as the best gauge of large-cap US equities because it comprises of more stocks across sectors. The NASDAQ is another similar index, although it is more tech-heavy and therefore sensitive to potential interest rate rises.   

***DJIA***  

* A stock market index that tracks 30 large, publicly-owned blue chip companies trading on the New York Stock Exchange. Critics say that it is not accurately represent the state of the US economy because the number of companies on the list is too small. Some also take issue with how the weightings of the companies are calculated.    

***CBOE VIX***  

* A real-time index that represents market expectations for the relative strength of price changes in the near-term on the S&P500. It is an important index because it provides a quantifiable measure of investor sentiment and risk. Vix values greater than 30 are regarded as periods of high volatility, stemming from increased uncertainty and risk. Vix figures under 20 are linked to stress-free and stable periods in the market.   

***Russell 2000***  

* This index is seen as the bellwether of the American economy because it measures the performance of smaller businesses focussed on the domestic market. 

***FTSE 100***  

* An index that tracks the 100 largest public companies by market capitalization that trade on the London Stock Exchange. A company does not have to be British to be included on the index but must be listed on the London Stock Exchange.Since many of the included companies are foreign or do business overseas, the value of the GBP plays a role in the index' movements. For instance, a weaker Pound means a Dollar-based company would be worth more in pounds. Therefore, the index tends to move in opposite directions to the GBP exchange rate.   

## Column 1
### S&P500
```{r}
sp500 <- fredr(
  series_id = "SP500",
  observation_start = as.Date("2019-01-01"),
  observation_end = as.Date(today)
)

sp500 <- as.xts(as.data.table(sp500))

sp500_plot <- dygraph(sp500) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Index") %>%
  dyRangeSelector(dateWindow=c(today - 300, today)) %>%
  dySeries("value", label = "Index") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

sp500_plot
```

### Dow Jones Industrial Average
```{r}
djia <- fredr(
  series_id = "DJIA",
  observation_start = as.Date("2019-01-01"),
  observation_end = as.Date(today)
)

djia <- as.xts(as.data.table(djia))

djia_plot <- dygraph(djia) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Index") %>%
  dyRangeSelector(dateWindow=c(today - 300, today)) %>%
  dySeries("value", label = "Index") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

djia_plot
```


## Column 2

### NASDAQ Composite Index
```{r}
nasdaq <- fredr(
  series_id = "NASDAQCOM",
  observation_start = as.Date("2019-01-01"),
  observation_end = as.Date(today)
)

nasdaq <- as.xts(as.data.table(nasdaq))

nasdaq_plot <- dygraph(nasdaq) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Index") %>%
  dyRangeSelector(dateWindow=c(today - 300, today)) %>%
  dySeries("value", label = "Index") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

nasdaq_plot
```

### CBOE VIX
```{r}
vix <- fredr(
  series_id = "VIXCLS",
  observation_start = as.Date("2020-01-01"),
  observation_end = as.Date(today)
)

vix <- as.xts(as.data.table(vix))

vix_plot <- dygraph(vix) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Index") %>%
  dyRangeSelector(dateWindow=c(today - 50, today)) %>%
  dySeries("value", label = "Index") %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE)

vix_plot
```

# Macro Indicators {data-navmenu="Indicators"}

## Column 1 { .tabset}
### Inflation Expectations
```{r}
# Spread between 5yr TIPS rate and conventional 5yr Treasury Yield
## Getting TIPS data
tips5yr <- fredr(
  series_id = "DFII5",
  observation_start = as.Date("2019-01-01"),
  observation_end = as.Date(today)
)

tips5yr <- rename(tips5yr, rate_tips5yr = value)

## Getting 5yr Treasury Yield data
treasury5yr <- fredr(
  series_id = "DGS5",
  observation_start = as.Date("2019-01-01"),
  observation_end = as.Date(today)
)

treasury5yr <- rename(treasury5yr, yield_treausry5yr = value)

## Combining the datasets
inflation_expectations <- merge(tips5yr, treasury5yr, by = "date")

## Adding a column for inflation expectations
inflation_expectations$spread <- (inflation_expectations$yield_treausry5yr - inflation_expectations$rate_tips5yr)

# Charting the expectations
inflation_expectations <- as.xts(as.data.table(inflation_expectations))

inflation_expectations_plot <- dygraph(inflation_expectations$spread, main = "Inflation Expectations: 5yr Treasury Yield - 5yr TIPS rate") %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Expected Inflation, % (over next 5 years)") %>%
  dyRangeSelector(dateWindow=c(today - 600, today)) %>%
  dySeries("spread", label = "Expected Inflation")

inflation_expectations_plot

```

### YoY CPI Inflation
```{r}
# Gathering Data
us_inflation <- Quandl("RATEINF/INFLATION_USA", start_date='2015-01-01', api_key="Czu7sXoss_MqATwRtZXh")
us_inflation <- rename(us_inflation, us_infl = Value)
uk_inflation <- Quandl("RATEINF/INFLATION_GBR", start_date='2015-01-01', api_key="Czu7sXoss_MqATwRtZXh")
uk_inflation <- rename(uk_inflation, uk_infl = Value)
eu_inflation <- Quandl("RATEINF/INFLATION_EUR", start_date='2015-01-01', api_key="Czu7sXoss_MqATwRtZXh")
eu_inflation <- rename(eu_inflation, eu_infl = Value)
jp_inflation <- Quandl("RATEINF/INFLATION_JPN", start_date='2015-01-01', api_key="Czu7sXoss_MqATwRtZXh")
jp_inflation <- rename(jp_inflation, jp_infl = Value)
ru_inflation <- Quandl("RATEINF/INFLATION_RUS", start_date='2015-01-01', api_key="Czu7sXoss_MqATwRtZXh")
ru_inflation <- rename(ru_inflation, ru_infl = Value)

# Combining Plots
inflation <- merge(us_inflation, uk_inflation, by = "Date")
inflation <- merge(inflation, eu_inflation, by = "Date")
inflation <- merge(inflation, jp_inflation, by = "Date")
inflation <- merge(inflation, ru_inflation, by = "Date")

# Formatting data for charts
inflation <- as.xts(as.data.table(inflation))

# Making Chart
inflation_plot <- dygraph(inflation) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "YoY %") %>%
  dyRangeSelector(dateWindow=c(today - 300, today-10)) %>%
  dySeries("us_infl", label = "USA YoY") %>%
  dySeries("uk_infl", label = "UK YoY") %>%
  dySeries("eu_infl", label = "EUR YoY") %>%
  dySeries("jp_infl", label = "JPN YoY") %>%
  dySeries("ru_infl", label = "RUS YoY") %>%
  dyHighlight(hideOnMouseOut = TRUE, highlightSeriesOpts = list(strokeWidth = 1.5)) %>%
  dyLegend(show = "always", hideOnMouseOut = TRUE, width = 600)

inflation_plot

```


## Column 2 {data-width=500}
### USA Unemployment
```{r}
# Gathering Data
## Total Rate
us_ut <- fredr(
  series_id = "UNRATE",
  observation_start = as.Date("2005-01-01"),
  observation_end = as.Date(today)
)
us_ut <- rename(us_ut, ut_total = value)

## Men Rate
us_ut_men <- fredr(
  series_id = "LNS14000001",
  observation_start = as.Date("2005-01-01"),
  observation_end = as.Date(today)
)
us_ut_men <- rename(us_ut_men, ut_men = value)

## Women Rate
us_ut_women <- fredr(
  series_id = "LNS14000002",
  observation_start = as.Date("2005-01-01"),
  observation_end = as.Date(today)
)
us_ut_women <- rename(us_ut_women, ut_women = value)

# Combining and formatting data
us_ut_all <- merge(us_ut, us_ut_men, by = "date")
us_ut_all <- merge(us_ut_all, us_ut_women, by = "date")

us_ut_all <- as.xts(as.data.table(us_ut_all))

# Making graph
us_ut_all_plot <- dygraph(us_ut_all) %>%
  dyAxis("x", drawGrid = TRUE) %>%
  dyAxis("y", label = "Rate (%)") %>%
  dyRangeSelector(dateWindow=c(today - 600, today)) %>%
  dySeries("ut_total", label = "Total Unemployment Rate") %>%
  dySeries("ut_men", label = "Men Unemployment Rate") %>%
  dySeries("ut_women", label = "Women Unemployment Rate")

us_ut_all_plot
```



# FOMC Predictions {data-navmenu="Indicators"}
## Column 1
### FOMC CPI Predictions
```{r}
# Getting Predictions
fomc_cpi_predictions <- Quandl("FRED/JCXFEMD", api_key="Czu7sXoss_MqATwRtZXh")
fomc_ffr_midpoint_predictions <- Quandl("FRED/FEDTARRM", api_key="Czu7sXoss_MqATwRtZXh")
fomc_unemployment_predictions <- Quandl("FRED/UNRATEMD", api_key="Czu7sXoss_MqATwRtZXh")

# CPI Predictions
knitr::kable(fomc_cpi_predictions)

```

## Column 2
### FOMC FFR Midpoint Predictions
```{r}
# Getting Predictions
fomc_cpi_predictions <- Quandl("FRED/JCXFEMD", api_key="Czu7sXoss_MqATwRtZXh")
fomc_ffr_midpoint_predictions <- Quandl("FRED/FEDTARRM", api_key="Czu7sXoss_MqATwRtZXh")
fomc_unemployment_predictions <- Quandl("FRED/UNRATEMD", api_key="Czu7sXoss_MqATwRtZXh")

# CPI Predictions
knitr::kable(fomc_ffr_midpoint_predictions)
```

## Column 3
### FOMC Unemployment Predictions
```{r}
# Getting Predictions
fomc_cpi_predictions <- Quandl("FRED/JCXFEMD", api_key="Czu7sXoss_MqATwRtZXh")
fomc_ffr_midpoint_predictions <- Quandl("FRED/FEDTARRM", api_key="Czu7sXoss_MqATwRtZXh")
fomc_unemployment_predictions <- Quandl("FRED/UNRATEMD", api_key="Czu7sXoss_MqATwRtZXh")

# CPI Predictions
knitr::kable(fomc_unemployment_predictions)
```


# About

## Column 1 {data-width=600}
### About the dashboard
This dashboard came from the desire to collate macroeconomic gauges in one place and have an overview of some macroeconomic data to supplement my following the news. The dashboard uses APIs to import open-source raw data. The old saying that you get what you pay for still stands, and there are some limitations to using free data sources. For instance, you'll see that the data is typically a day or two delayed. The gaps in the graphs also correspond to weekends or public holidays. With better data sources I would want to add more charts (eg the FTSE 100 or Russel 2000) as well as more granular versions of the ones I've included. However, this was more of an exercise in coding a dashboard that you or I might find useful for (only) educational purposes.  *[Carl Sacklen, 2021]*  

### Sources
US Federal Reserve, US Treasury, Bank of England, European Central Bank, World Bank Group, Reuters News




